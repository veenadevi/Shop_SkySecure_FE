<div class="text-center">
    <h2 class="header-title">
        create Product offer
    </h2>
    <div class="variant-product" 
        *ngIf="products.length > 0">
        <div class="forms-01">
            <div class="label">
                <label>Select Products</label>
            </div>
           

            <div class="product-select">
                <p-dropdown [options]="products" (onChange)="selectProduct($event)" [(ngModel)]="selectedProductId"
                    optionLabel="name" [filter]="true" filterBy="name" [showClear]="true"
                    placeholder="Select a Product">
                    <ng-template pTemplate="selectedItem">
                        <div class="country-item country-item-value" *ngIf="selectedProductId">
                            <div>{{selectedProductId.name}}</div>
                        </div>
                    </ng-template>
                    <ng-template let-products pTemplate="item">
                        <div class="country-item">
                            <div>{{products.name}}</div>
                        </div>
                    </ng-template>
                </p-dropdown>


            </div>





            <!-- error block -->
            <div class="invalid-feedback" *ngIf="submitted && myForm.products.errors?.required">
                <sup>*</sup>Please select product
            </div>


        </div>


        <!-- <div class="section-01"> -->

            <div class="oem">
                <div class="forms">
                    <div class="label">
                        <label [ngClass]="{'error': submitted && myForm.OEM.errors}">OEM's</label>
                    </div>
                    <div class="select">
                        <select class="custom-select" (change)="changeOEM($event)" formControlName="OEM"
                            [ngClass]="{'error': submitted && myForm.OEM.errors}">
                            <option value="">Choose...</option>
                            <option *ngFor="let oem of oemList" [ngValue]="oem._id">{{oem.name}}</option>
                        </select>
                    </div>
                </div>
                <!-- error block -->
                <div class="invalid-feedback" *ngIf="submitted && myForm.OEM.errors?.required">
                    <sup>*</sup>Please select OEM
                </div>
            </div>


        <!-- </div> -->


        <div class="OEM">
            <input type="checkbox"  class="form-check d-inline" id="chb" >
            <div for="chb" class="label-oem">&nbsp;OEM
            </div>
          </div>
    </div>
</div>



<div class="container">
    <div class="row custom-wrapper">
        <div class="col-md-12">

            <!-- Form starts -->
            <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">




                <div class="group-gap">
                
              


                    <div class="section-02">
                        <!-- Product Name -->
                        <div class="product">
                            <div class=forms>
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.productName.errors}">
                                        Title</label>
                                </div>
                                <div class="input">
                                    <input type="text" class="custom-select-01" formControlName="productName"
                                       >
                                </div>

                              
                            </div>
                        </div>

                        <div class="description">
                            <div class="forms">
                                <div class="label">
                                    <label >
                                        Description</label>
                                </div>
                                <div class="input">
                                    <textarea class="custom-select-02" formControlName="Description"></textarea>
                                </div>
                            </div>

                        </div>


                        <div class="coupen">
                            <div class="label">
                                <label>
                                    Coupon Code</label>
                            </div>
                            <div class="input">
                                <input type="text" class="custom-select-01" formControlName="coupenCode">
                            </div>
                        </div>
                        <div class="coupen">
                            <div class="label">
                                <label>
                                    Discount %</label>
                            </div>
                            <div class="input">
                                <input type="text" class="custom-select-01" formControlName="coupenPercent">
                            </div>
                        </div>
</div>


                    <div class="header-year">
                        <h4>Yearly:</h4>
                    </div>
                    <div class="section-04">


                        <div class="subscription">
                            <div class="forms">
                                <div class="label">
                                    <label
                                        [ngClass]="{'error': submitted && myForm.ysubscriptionType.errors}">Subscription
                                        Type</label>
                                </div>
                                <div class="select">
                                    <select class="custom-select" (change)="changeSubscriptionType($event)"
                                        formControlName="ysubscriptionType"
                                        [ngClass]="{'error': submitted && myForm.ysubscriptionType.errors}">
                                        <option value="">Choose...</option>
                                        <option *ngFor="let type of subscriptionTypeList" [value]="type">{{type}}
                                        </option>
                                    </select>
                                </div>

                                <!-- error block -->
                                <div class="invalid-feedback"
                                    *ngIf="submitted && myForm.ysubscriptionType.errors?.required">
                                    <sup>*</sup>Please select Subscription Type
                                </div>
                            </div>
                        </div>
                        <!---Product Order Number-->
                        <div class="orderno">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                        ERP Price</label>
                                </div>
                                <div class="input">
                                    <input type="number" class="custom-select-01" formControlName="yerpPrice" (change)="onPriceChange('yerpPrice')"
                                        [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                </div>

                                <!-- error block -->
                                <div class="invalid-feedback" *ngIf="submitted && myForm.yproductPrice.errors?.required">
                                    <sup>*</sup>Product ERP required
                                </div>
                            </div>

                        </div>

                        <div class="price">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                        Distributor Price</label>
                                </div>
                                <div class="input">
                                    <input type="text" class="custom-select-03" formControlName="ydistributorPrice"
                                    (change)="onPriceChange('yerpPrice')"  [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                </div>

                            </div>


                        </div>

                        <!---Product Price-->
                        <div class="price">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                        SS Price</label>
                                </div>
                                <div class="input">
                                    <input type="text"  readonly class="custom-select-03" formControlName="yproductPrice"
                                        [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                </div>

                            </div>


                        </div>

                        <div class="price">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                        Discount(%)</label>
                                </div>
                                <div class="input">
                                    <input type="text" readonly class="custom-select-03" formControlName="ydiscount"
                                        [(ngModel)]=defaultDiscount
                                        [ngClass]="{'error': submitted && myForm.yproductPrice.errors}">
                                </div>

                            </div>

                        </div>
                    </div>







                    <div class="header-year">
                        <h4>Monthly Price Details:</h4>
                    </div>
                    <div class="section-04">
                        <!-- Subscription Type -->
                        <div class="subscription">
                            <div class="forms">
                                <div class="label">
                                    <label
                                        [ngClass]="{'error': submitted && myForm.msubscriptionType.errors}">Subscription
                                        Type</label>
                                </div>
                                <div class="select">
                                    <select class="custom-select" (change)="changeSubscriptionType($event)"
                                        formControlName="msubscriptionType"
                                        [ngClass]="{'error': submitted && myForm.msubscriptionType.errors}">
                                        <option value="">Choose...</option>
                                        <option *ngFor="let type of subscriptionTypeList" [value]="type">{{type}}
                                        </option>
                                    </select>
                                </div>

                                <!-- error block -->
                                <div class="invalid-feedback"
                                    *ngIf="submitted && myForm.msubscriptionType.errors?.required">
                                    <sup>*</sup>Please select Subscription Type
                                </div>
                            </div>
                        </div>


                        <!---Product Order Number-->
                        <div class="orderno">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                        ERP Price</label>
                                </div>
                                <div class="input">
                                    <input type="number" class="custom-select-01" formControlName="merpPrice" 
                                    (change)="onPriceChange('merpPrice')" [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                </div>

                              
                            </div>

                        </div>
                        

                        <div class="price">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                        Distributor Price</label>
                                </div>
                                <div class="input">
                                    <input type="text" class="custom-select-03" formControlName="mdistributorPrice"
                                    (change)="onPriceChange('merpPrice')"  [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                </div>

                            </div>


                        </div>

                        <!---Product Price-->
                        <div class="price">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                        SS Price</label>
                                </div>
                                <div class="input">
                                    <input type="text"  readonly class="custom-select-03" formControlName="mproductPrice"
                                        [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                </div>

                            </div>


                        </div>

                        <div class="price">
                            <div class="forms">
                                <div class="label">
                                    <label [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                        Discount(%)</label>
                                </div>
                                <div class="input">
                                    <input type="text" readonly class="custom-select-03" formControlName="mdiscount"
                                        [(ngModel)]=defaultDiscount
                                        [ngClass]="{'error': submitted && myForm.mproductPrice.errors}">
                                </div>

                            </div>

                        </div>
                    </div>



                </div>



                <div class="upload">
                    <h4>Offer Image Upload:</h4>
                    <label>Image Upload</label>
                    <div class="avatar-edit">
                        <input type='file' id="imageUpload" accept=".png, .jpg, .jpeg" #fileInput
                            (change)="uploadFile($event)" />
                        <img *ngIf="productLogo" style="width: 100px;height: 100px;" src="{{productLogo}}"
                            alt="productLogo" />
                        <button *ngIf="productLogo" style="margin: 10px;" class="btn btn-warning"
                            (click)="removeImage()">Remove</button>
                        <label for="imageUpload" *ngIf="editFile"
                            [ngClass]="['custom-label', 'upload-image']"></label>
                        <label *ngIf="removeUpload" [ngClass]="['custom-label', 'remove-image']"
                            (click)="removeUploadedFile()"></label>
                    </div>
                    <div class="avatar-preview">
                        <div id="imagePreview" [style.backgroundImage]="'url('+ imageUrl +')'">
                        </div>
                    </div>
                </div>


              
                <div class="btn-02">
                    <button class="btn primary-btn" (click)="editProduct()">Create Offer</button>
                </div>
                <div class="row" *ngIf="showMsg">
                    <div class="col-xs-12">
                        <p class="alert alert-success">
                            <strong>Product Offer Created  Successfully !</strong>

                        </p>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>